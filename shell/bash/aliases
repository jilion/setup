# Command Enhancements

# Utility
alias reload="source $JIME_SETUP_PATH/shell/bash/aliases"
alias ea="mate -w $JIME_SETUP_PATH/shell/bash/aliases && reload" # Edit aliases

# Jime
alias js="cd $JIME_SETUP_PATH"
alias jj="cd $JIME_CODE_PATH/Jime.com"
alias jf="cd $JIME_CODE_PATH/Jime.org"
alias ju="cd $JIME_CODE_PATH/upload"
# alias jb="cd $JIME_CODE_PATH/backstage"
alias jl="cd $JIME_CODE_PATH/locations"
alias gol="cd $JIME_CODE_PATH/gollum"

# Jilion
alias mi="cd $JILION_PATH/Clients/Mintt/mintt"

alias hb="cd $JILION_PATH/Products/HerokuBackups/heroku_backups"
alias fb="cd $JILION_PATH/Products/FreckleBackups/freckle_backups"
alias sm="cd $JILION_PATH/Products/SublimeMeteo"
alias dn="cd $JILION_PATH/Products/Ding"
alias ji="cd $JILION_PATH/Products/Jilion.com/jilion.com"
alias jb="cd $JILION_PATH/Products/Jilion.com/blog.jilion.com"

alias sb="cd $JILION_PATH/Products/Jilion.com/sublime"
alias sv="cd $JILION_PATH/Products/SublimeVideo/sublime_video"
alias msv="cd $JILION_PATH/Products/SublimeVideo/my.sublimevideo.net"
alias dsv="cd $JILION_PATH/Products/SublimeVideo/docs.sublimevideo.net;"
alias ssv="cd $JILION_PATH/Products/SublimeVideo/status.sublimevideo.net"
alias svs="cd $JILION_PATH/Products/SublimeVideo/sublimevideo.net" # sublime video site

alias aea="cd $JILION_PATH/Products/Aelios/aeliosapp.com" # Aelios site

# Common -- Some are from Damian Conway
alias l="ls -lh"
alias la="ls -lah"
alias ll="la"

alias h="history"
alias o="open ."
alias ..="cd .."
alias cd..="cd .."

# Function
function take() {
  mkdir -p "$1"
  cd "$1"
}
alias k9="killall -9"
function killnamed () {
  ps ax | grep $1 | cut -d ' ' -f 2 | xargs kill
}
function zipr() {
  zip -r $1.zip $1
}

# Processes
alias tu="top -o cpu" # cpu
alias tm="top -o vsize" # memory

# =======
# = GIT =
# =======
alias ungit="find . -name '.git' -exec rm -rf {} \;"
alias gb="git branch"
alias gba="git branch -a"
alias gc="git commit -v"
alias gca="git commit -v -a"
# Commit pending changes and quote all args as message
function gg() {
  git commit -v -a -m "$*"
}
alias gco="git checkout"
alias gd="git diff"
alias gdm="git diff master"
alias gdt="git difftool"
alias gf="git fetch"
alias gfo="git fetch origin"
alias grb="git rebase"
alias grbi="git rebase -i"
alias gl="git pull"
alias glo="git pull origin"
alias gnp="git-notpushed"
alias gp="git push"
alias gpo="git push origin"
alias gm="git merge"
alias g="git status"
alias gt="g"
alias gst="g"
alias eg="mate .git/config"
alias gx="gitx"
# Git clone from GitHub
function gch() {
  git clone git://github.com/$USER/$1.git
}

# Setup a tracking branch from [remote] [branch_name]
function gbt() {
  git branch --track $2 $1/$2 && git checkout $2
}
# Quickly clobber a file and checkout
function grf() {
  rm $1
  git checkout $1
}
# Call from inside an initialized Git repo, with the name of the repo.
function new-git() {
  ssh git@example.com "mkdir $1.git && cd $1.git && git --bare init"
  git remote add origin git@example.com:$1.git
  git push origin master
  git config branch.master.remote origin
  git config branch.master.merge refs/heads/master
  git config push.default current
}

# TextMate
alias m="mate"
alias m.="mate ."
alias mm="mate ."
alias mr="mate app bin config db doc public/javascripts lib lib/tasks done public/stylesheets vendor/gems vendor/plugins spec rspec.watchr features test todo todo.todo tools Rakefile LICENSE README.* CHANGELOG cucumber.yml .gitignore *.gemspec .gems .git/config config.ru Gemfile Guardfile"

# Ruby
alias r="rake"
alias irb="irb --readline -r irb/completion"

# rugygem
alias gu="gem update"
alias gi="gem install"
alias gui="gem uninstall"

# bundler
alias be='bundle exec'
alias bi='bundle install'
alias bl='bundle list'
alias bo='bundle open'
alias bp='bundle package'
alias bs='bundle show'
alias bu='bundle update'

# open_gem
alias go="gem open --latest"
alias gr="gem read --latest"

# guard
alias bg="bundle exec guard"
alias bgc="bundle exec guard -c"

# passenger
alias pgs="passenger start"

# =========
# = Rails =
# =========

alias ttr="touch tmp/restart.txt"
alias rr="rake routes"

alias dbtp="rake db:test:prepare"
alias dbm="rake db:migrate"
alias dbr="rake db:drop:all
           rake db:create:all
           rake db:migrate
           rake db:test:prepare
           rake db:seed
           annotate -i"

alias dbp="rake db:populate"

alias dbrp="dbr && dbp"

alias tl="tail -f log/*.log"
alias tld="tail -f log/development.log"
alias tlt="tail -f log/test.log"
alias tlp="tail -f log/production.log"
alias tlpa="tail -f log/passenger.3000.log"

# Rails universal
function ss {
  if [ -e script/rails ]; then
    script/rails server $@
  else
    script/server $@
  fi
}
function ssp {
  if [ -e script/rails ]; then
    script/rails server -e production $@
  else
    script/server -e production $@
  fi
}
function sc {
  if [ -e script/rails ]; then
    script/rails console $@
  else
    script/console $@
  fi
}
function sg {
  if [ -e script/rails ]; then
    script/rails generate $@
  else
    script/generate $@
  fi
}

# Rails 2
alias sd="./script/destroy"
alias sp="./script/plugin"
alias ssu="./script/server -u"
alias ssc="./script/server -p 3001 -e test"

# Rails 3
alias rg="sg"
alias rd="rails destroy"
alias rp="rails plugin"
alias rc="sc"
alias rs="ss"
alias rsp="ssp"

# BDD
alias rsa="rake spec:acceptance"
alias wr="bundle exec watchr rspec.watchr"
